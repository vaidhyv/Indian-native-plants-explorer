<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Native Agro-Forestry Explorer</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- PapaParse for CSV -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&family=Noto+Serif:wght@400;700&family=Noto+Sans+Tamil&family=Noto+Sans+Kannada&family=Noto+Sans+Telugu&family=Noto+Sans+KR&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Noto Sans', sans-serif; background-color: #f0fdf4; }
        .serif { font-family: 'Noto Serif', serif; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Language Fonts */
        .font-tamil { font-family: 'Noto Sans Tamil', sans-serif; }
        .font-kannada { font-family: 'Noto Sans Kannada', sans-serif; }
        .font-telugu { font-family: 'Noto Sans Telugu', sans-serif; }
        .font-korean { font-family: 'Noto Sans KR', sans-serif; }
        
        /* Google Translate Widget Styling Overrides */
        .goog-te-banner-frame { display: none !important; }
        body { top: 0px !important; }
        #google_translate_element select {
            background-color: #166534;
            color: white;
            border: none;
            padding: 5px;
            border-radius: 4px;
            font-family: 'Noto Sans', sans-serif;
        }
        
        /* Custom Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
        
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .animate-spin-custom { animation: spin 1s linear infinite; }
        
        .markdown-body ul { list-style-type: disc; margin-left: 1.5rem; margin-bottom: 1rem; }
        .markdown-body ol { list-style-type: decimal; margin-left: 1.5rem; margin-bottom: 1rem; }
        .markdown-body p { margin-bottom: 0.75rem; }
        .markdown-body strong { font-weight: 600; color: #166534; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef, useCallback } = React;

        // --- UI Translations ---
        const TRANSLATIONS = {
            "English": {
                title: "Native Agro-Forestry",
                subtitle: "Interactive Database for Indian Native Species",
                searchPlaceholder: "Search plants...",
                uploadCsv: "Upload CSV",
                downloadCsv: "Download CSV",
                resetData: "Reset Data",
                category: "Category",
                nakshatra: "Nakshatra (Star)",
                birdStatus: "Bird Status",
                highlights: "Highlights & Benefits",
                plantingGuide: "Planting Guide",
                maintenance: "Maintenance",
                procurement: "Procurement Sources",
                kanchipuram: "Kanchipuram Region",
                penukonda: "Penukonda / Anantapur",
                readMore: "Read more on Wikipedia",
                temple: "Temple",
                location: "Location",
                cultural: "Cultural Significance & Nakshatra",
                features: "Distinguishing Features",
                leaves: "Leaves",
                flowers: "Flowers",
                fruits: "Fruits",
                overall: "Bark/Overall",
                preloaded: "Pre-loaded from Web",
                featureView: "Feature view",
                searchMore: "Search More",
                searchImage: "Search Image",
                viewDetails: "View Details ‚Üí",
                topPick: "Top Pick",
                star: "Star",
                askAi: "Ask about",
                consultingAi: "Consulting AI...",
                careCalendar: "üìÖ Care Calendar",
                recipes: "üç≤ Recipes",
                pestControl: "üêõ Pest Control",
                translateContent: "‚ú® Translate Content to",
                translating: "Translating..."
            },
            "Tamil": {
                title: "‡Æ®‡Ææ‡Æü‡Øç‡Æü‡ØÅ ‡Æµ‡Øá‡Æ≥‡Ææ‡Æ£‡Øç ‡Æï‡Ææ‡Æü‡ØÅ‡Æï‡Æ≥‡Øç",
                subtitle: "‡Æá‡Æ®‡Øç‡Æ§‡Æø‡ÆØ ‡Æ®‡Ææ‡Æü‡Øç‡Æü‡ØÅ ‡ÆÆ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡ØÅ‡Æï‡Øç‡Æï‡Ææ‡Æ© ‡Æ§‡Æ∞‡Æµ‡ØÅ‡Æ§‡Øç‡Æ§‡Æ≥‡ÆÆ‡Øç",
                searchPlaceholder: "‡Æ§‡Ææ‡Æµ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æü‡ØÅ‡Æï...",
                uploadCsv: "CSV ‡Æ™‡Æ§‡Æø‡Æµ‡Øá‡Æ±‡Øç‡Æ±‡Æµ‡ØÅ‡ÆÆ‡Øç",
                downloadCsv: "CSV ‡Æ™‡Æ§‡Æø‡Æµ‡Æø‡Æ±‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
                resetData: "‡Æ§‡Æ∞‡Æµ‡Øà ‡ÆÆ‡ØÄ‡Æü‡Øç‡Æü‡ÆÆ‡Øà",
                category: "‡Æµ‡Æï‡Øà",
                nakshatra: "‡Æ®‡Æü‡Øç‡Æö‡Æ§‡Øç‡Æ§‡Æø‡Æ∞‡ÆÆ‡Øç",
                birdStatus: "‡Æ™‡Æ±‡Æµ‡Øà‡Æï‡Æ≥‡Øç ‡Æ®‡Æø‡Æ≤‡Øà",
                highlights: "‡Æö‡Æø‡Æ±‡Æ™‡Øç‡Æ™‡ÆÆ‡Øç‡Æö‡Æô‡Øç‡Æï‡Æ≥‡Øç & ‡Æ®‡Æ©‡Øç‡ÆÆ‡Øà‡Æï‡Æ≥‡Øç",
                plantingGuide: "‡Æ®‡Æü‡Æµ‡ØÅ ‡Æµ‡Æ¥‡Æø‡Æï‡Ææ‡Æü‡Øç‡Æü‡Æø",
                maintenance: "‡Æ™‡Æ∞‡Ææ‡ÆÆ‡Æ∞‡Æø‡Æ™‡Øç‡Æ™‡ØÅ",
                procurement: "‡Æï‡Øä‡Æ≥‡Øç‡ÆÆ‡ØÅ‡Æ§‡Æ≤‡Øç ‡ÆÆ‡ØÇ‡Æ≤‡Æô‡Øç‡Æï‡Æ≥‡Øç",
                kanchipuram: "‡Æï‡Ææ‡Æû‡Øç‡Æö‡Æø‡Æ™‡ØÅ‡Æ∞‡ÆÆ‡Øç ‡Æ™‡Æï‡ØÅ‡Æ§‡Æø",
                penukonda: "‡Æ™‡ØÜ‡Æ©‡ØÅ‡Æï‡Øä‡Æ£‡Øç‡Æü‡Ææ / ‡ÆÖ‡Æ©‡Æ®‡Øç‡Æ§‡Æ™‡ØÇ‡Æ∞‡Øç",
                readMore: "‡Æµ‡Æø‡Æï‡Øç‡Æï‡Æø‡Æ™‡ØÄ‡Æü‡Æø‡ÆØ‡Ææ‡Æµ‡Æø‡Æ≤‡Øç ‡ÆÆ‡Øá‡Æ≤‡ØÅ‡ÆÆ‡Øç ‡Æ™‡Æü‡Æø‡Æï‡Øç‡Æï",
                temple: "‡Æï‡Øã‡Æµ‡Æø‡Æ≤‡Øç",
                location: "‡Æá‡Æü‡ÆÆ‡Øç",
                cultural: "‡Æï‡Æ≤‡Ææ‡Æö‡Øç‡Æö‡Ææ‡Æ∞ ‡ÆÆ‡ØÅ‡Æï‡Øç‡Æï‡Æø‡ÆØ‡Æ§‡Øç‡Æ§‡ØÅ‡Æµ‡ÆÆ‡Øç & ‡Æ®‡Æü‡Øç‡Æö‡Æ§‡Øç‡Æ§‡Æø‡Æ∞‡ÆÆ‡Øç",
                features: "‡Æ§‡Æ©‡Æø‡Æ§‡Øç‡Æ§‡ØÅ‡Æµ‡ÆÆ‡Ææ‡Æ© ‡ÆÖ‡ÆÆ‡Øç‡Æö‡Æô‡Øç‡Æï‡Æ≥‡Øç",
                leaves: "‡Æá‡Æ≤‡Øà‡Æï‡Æ≥‡Øç",
                flowers: "‡ÆÆ‡Æ≤‡Æ∞‡Øç‡Æï‡Æ≥‡Øç",
                fruits: "‡Æ™‡Æ¥‡Æô‡Øç‡Æï‡Æ≥‡Øç",
                overall: "‡ÆÆ‡Æ∞‡ÆÆ‡Øç/‡Æ™‡Øä‡Æ§‡ØÅ",
                preloaded: "‡Æá‡Æ£‡Øà‡ÆØ‡Æ§‡Øç‡Æ§‡Æø‡Æ≤‡Æø‡Æ∞‡ØÅ‡Æ®‡Øç‡Æ§‡ØÅ ‡Æè‡Æ±‡Øç‡Æ±‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ",
                featureView: "‡ÆÖ‡ÆÆ‡Øç‡Æö‡ÆÆ‡Øç ‡Æ™‡Ææ‡Æ∞‡Øç‡Æµ‡Øà",
                searchMore: "‡ÆÆ‡Øá‡Æ≤‡ØÅ‡ÆÆ‡Øç ‡Æ§‡Øá‡Æü‡ØÅ‡Æï",
                searchImage: "‡Æ™‡Æü‡ÆÆ‡Øç ‡Æ§‡Øá‡Æü‡ØÅ‡Æï",
                viewDetails: "‡Æµ‡Æø‡Æµ‡Æ∞‡Æô‡Øç‡Æï‡Æ≥‡Øà‡Æï‡Øç ‡Æï‡Ææ‡Æ£‡Øç‡Æï ‚Üí",
                topPick: "‡Æö‡Æø‡Æ±‡Æ®‡Øç‡Æ§ ‡Æ§‡Øá‡Æ∞‡Øç‡Æµ‡ØÅ",
                star: "‡Æ®‡Æü‡Øç‡Æö‡Æ§‡Øç‡Æ§‡Æø‡Æ∞‡ÆÆ‡Øç",
                askAi: "‡Æï‡Øá‡Æ≥‡Øç‡Æµ‡Æø ‡Æï‡Øá‡Æü‡Øç‡Æï",
                consultingAi: "AI ‡ÆÜ‡Æ≤‡Øã‡Æö‡Æ©‡Øà...",
                careCalendar: "üìÖ ‡Æ™‡Æ∞‡Ææ‡ÆÆ‡Æ∞‡Æø‡Æ™‡Øç‡Æ™‡ØÅ ‡Æ®‡Ææ‡Æ≥‡Øç‡Æï‡Ææ‡Æü‡Øç‡Æü‡Æø",
                recipes: "üç≤ ‡Æö‡ÆÆ‡Øà‡ÆØ‡Æ≤‡Øç ‡Æï‡ØÅ‡Æ±‡Æø‡Æ™‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç",
                pestControl: "üêõ ‡Æ™‡ØÇ‡Æö‡Øç‡Æö‡Æø ‡Æï‡Æü‡Øç‡Æü‡ØÅ‡Æ™‡Øç‡Æ™‡Ææ‡Æü‡ØÅ",
                translateContent: "‚ú® ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æü‡Æï‡Øç‡Æï‡Æ§‡Øç‡Æ§‡Øà ‡ÆÆ‡Øä‡Æ¥‡Æø‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
                translating: "‡ÆÆ‡Øä‡Æ¥‡Æø‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç‡Æï‡Øç‡Æï‡Æø‡Æ±‡Æ§‡ØÅ..."
            },
            "Kannada": {
                title: "‡≤¶‡≥á‡≤∂‡≥Ä‡≤Ø ‡≤ï‡≥É‡≤∑‡≤ø ‡≤Ö‡≤∞‡≤£‡≥ç‡≤Ø",
                subtitle: "‡≤≠‡≤æ‡≤∞‡≤§‡≥Ä‡≤Ø ‡≤¶‡≥á‡≤∂‡≥Ä‡≤Ø ‡≤™‡≥ç‡≤∞‡≤≠‡≥á‡≤¶‡≤ó‡≤≥‡≤ø‡≤ó‡≤æ‡≤ó‡≤ø ‡≤∏‡≤Ç‡≤µ‡≤æ‡≤¶‡≤æ‡≤§‡≥ç‡≤Æ‡≤ï ‡≤°‡≥á‡≤ü‡≤æ‡≤¨‡≥á‡≤∏‡≥ç",
                searchPlaceholder: "‡≤∏‡≤∏‡≥ç‡≤Ø‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≥Å‡≤°‡≥Å‡≤ï‡≤ø...",
                uploadCsv: "CSV ‡≤Ö‡≤™‡≥ç‚Äå‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø",
                downloadCsv: "CSV ‡≤°‡≥å‡≤®‡≥ç‚Äå‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø",
                resetData: "‡≤°‡≥á‡≤ü‡≤æ ‡≤Æ‡≤∞‡≥Å‡≤π‡≥ä‡≤Ç‡≤¶‡≤ø‡≤∏‡≤ø",
                category: "‡≤µ‡≤∞‡≥ç‡≤ó",
                nakshatra: "‡≤®‡≤ï‡≥ç‡≤∑‡≤§‡≥ç‡≤∞",
                birdStatus: "‡≤™‡≤ï‡≥ç‡≤∑‡≤ø ‡≤∏‡≥ç‡≤•‡≤ø‡≤§‡≤ø",
                highlights: "‡≤Æ‡≥Å‡≤ñ‡≥ç‡≤Ø‡≤æ‡≤Ç‡≤∂‡≤ó‡≤≥‡≥Å & ‡≤™‡≥ç‡≤∞‡≤Ø‡≥ã‡≤ú‡≤®‡≤ó‡≤≥‡≥Å",
                plantingGuide: "‡≤®‡≥Ü‡≤°‡≥Å‡≤µ‡≤ø‡≤ï‡≥Ü ‡≤Æ‡≤æ‡≤∞‡≥ç‡≤ó‡≤¶‡≤∞‡≥ç‡≤∂‡≤ø",
                maintenance: "‡≤®‡≤ø‡≤∞‡≥ç‡≤µ‡≤π‡≤£‡≥Ü",
                procurement: "‡≤ñ‡≤∞‡≥Ä‡≤¶‡≤ø ‡≤Æ‡≥Ç‡≤≤‡≤ó‡≤≥‡≥Å",
                kanchipuram: "‡≤ï‡≤æ‡≤Ç‡≤ö‡≤ø‡≤™‡≥Å‡≤∞‡≤Ç ‡≤™‡≥ç‡≤∞‡≤¶‡≥á‡≤∂",
                penukonda: "‡≤™‡≥Ü‡≤®‡≥Å‡≤ï‡≥ä‡≤Ç‡≤° / ‡≤Ö‡≤®‡≤Ç‡≤§‡≤™‡≥Å‡≤∞",
                readMore: "‡≤µ‡≤ø‡≤ï‡≤ø‡≤™‡≥Ä‡≤°‡≤ø‡≤Ø‡≤æ‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤á‡≤®‡≥ç‡≤®‡≤∑‡≥ç‡≤ü‡≥Å ‡≤ì‡≤¶‡≤ø",
                temple: "‡≤¶‡≥á‡≤µ‡≤∏‡≥ç‡≤•‡≤æ‡≤®",
                location: "‡≤∏‡≥ç‡≤•‡≤≥",
                cultural: "‡≤∏‡≤æ‡≤Ç‡≤∏‡≥ç‡≤ï‡≥É‡≤§‡≤ø‡≤ï ‡≤Æ‡≤π‡≤§‡≥ç‡≤µ & ‡≤®‡≤ï‡≥ç‡≤∑‡≤§‡≥ç‡≤∞",
                features: "‡≤µ‡≤ø‡≤∂‡≤ø‡≤∑‡≥ç‡≤ü ‡≤≤‡≤ï‡≥ç‡≤∑‡≤£‡≤ó‡≤≥‡≥Å",
                leaves: "‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥‡≥Å",
                flowers: "‡≤π‡≥Ç‡≤ó‡≤≥‡≥Å",
                fruits: "‡≤π‡≤£‡≥ç‡≤£‡≥Å‡≤ó‡≤≥‡≥Å",
                overall: "‡≤Æ‡≤∞/‡≤í‡≤ü‡≥ç‡≤ü‡≤æ‡≤∞‡≥Ü",
                preloaded: "‡≤µ‡≥Ü‡≤¨‡≥ç‚Äå‡≤®‡≤ø‡≤Ç‡≤¶ ‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü",
                featureView: "‡≤µ‡≥à‡≤∂‡≤ø‡≤∑‡≥ç‡≤ü‡≥ç‡≤Ø ‡≤®‡≥ã‡≤ü",
                searchMore: "‡≤á‡≤®‡≥ç‡≤®‡≤∑‡≥ç‡≤ü‡≥Å ‡≤π‡≥Å‡≤°‡≥Å‡≤ï‡≤ø",
                searchImage: "‡≤ö‡≤ø‡≤§‡≥ç‡≤∞ ‡≤π‡≥Å‡≤°‡≥Å‡≤ï‡≤ø",
                viewDetails: "‡≤µ‡≤ø‡≤µ‡≤∞‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≥ã‡≤°‡≤ø ‚Üí",
                topPick: "‡≤Ö‡≤§‡≥ç‡≤Ø‡≥Å‡≤§‡≥ç‡≤§‡≤Æ ‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü",
                star: "‡≤®‡≤ï‡≥ç‡≤∑‡≤§‡≥ç‡≤∞",
                askAi: "‡≤¨‡≤ó‡≥ç‡≤ó‡≥Ü ‡≤ï‡≥á‡≤≥‡≤ø",
                consultingAi: "AI ‡≤∏‡≤Æ‡≤æ‡≤≤‡≥ã‡≤ö‡≤®‡≥Ü...",
                careCalendar: "üìÖ ‡≤Ü‡≤∞‡≥à‡≤ï‡≥Ü ‡≤ï‡≥ç‡≤Ø‡≤æ‡≤≤‡≥Ü‡≤Ç‡≤°‡≤∞‡≥ç",
                recipes: "üç≤ ‡≤™‡≤æ‡≤ï‡≤µ‡≤ø‡≤ß‡≤æ‡≤®‡≤ó‡≤≥‡≥Å",
                pestControl: "üêõ ‡≤ï‡≥Ä‡≤ü ‡≤®‡≤ø‡≤Ø‡≤Ç‡≤§‡≥ç‡≤∞‡≤£",
                translateContent: "‚ú® ‡≤µ‡≤ø‡≤∑‡≤Ø‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤≠‡≤æ‡≤∑‡≤æ‡≤Ç‡≤§‡≤∞‡≤ø‡≤∏‡≤ø",
                translating: "‡≤≠‡≤æ‡≤∑‡≤æ‡≤Ç‡≤§‡≤∞‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥Ü..."
            },
            "Telugu": {
                title: "‡∞¶‡±á‡∞∂‡±Ä‡∞Ø ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡∞æ‡∞Ø ‡∞Ö‡∞ü‡∞µ‡±Ä",
                subtitle: "‡∞≠‡∞æ‡∞∞‡∞§‡±Ä‡∞Ø ‡∞¶‡±á‡∞∂‡±Ä‡∞Ø ‡∞ú‡∞æ‡∞§‡±Å‡∞≤ ‡∞ï‡±ã‡∞∏‡∞Ç ‡∞á‡∞Ç‡∞ü‡∞∞‡∞æ‡∞ï‡±ç‡∞ü‡∞ø‡∞µ‡±ç ‡∞°‡±á‡∞ü‡∞æ‡∞¨‡±á‡∞∏‡±ç",
                searchPlaceholder: "‡∞Æ‡±ä‡∞ï‡±ç‡∞ï‡∞≤‡∞®‡±Å ‡∞∂‡±ã‡∞ß‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø...",
                uploadCsv: "CSV ‡∞Ö‡∞™‡±ç‚Äå‡∞≤‡±ã‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
                downloadCsv: "CSV ‡∞°‡±å‡∞®‡±ç‚Äå‡∞≤‡±ã‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
                resetData: "‡∞°‡±á‡∞ü‡∞æ‡∞®‡±Å ‡∞∞‡±Ä‡∞∏‡±Ü‡∞ü‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
                category: "‡∞µ‡∞∞‡±ç‡∞ó‡∞Ç",
                nakshatra: "‡∞®‡∞ï‡±ç‡∞∑‡∞§‡±ç‡∞∞‡∞Ç",
                birdStatus: "‡∞™‡∞ï‡±ç‡∞∑‡±Å‡∞≤ ‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø",
                highlights: "‡∞Æ‡±Å‡∞ñ‡±ç‡∞Ø‡∞æ‡∞Ç‡∞∂‡∞æ‡∞≤‡±Å & ‡∞™‡±ç‡∞∞‡∞Ø‡±ã‡∞ú‡∞®‡∞æ‡∞≤‡±Å",
                plantingGuide: "‡∞®‡∞æ‡∞ü‡∞°‡∞Ç ‡∞ó‡±à‡∞°‡±ç",
                maintenance: "‡∞®‡∞ø‡∞∞‡±ç‡∞µ‡∞π‡∞£",
                procurement: "‡∞∏‡±á‡∞ï‡∞∞‡∞£ ‡∞µ‡∞®‡∞∞‡±Å‡∞≤‡±Å",
                kanchipuram: "‡∞ï‡∞æ‡∞Ç‡∞ö‡±Ä‡∞™‡±Å‡∞∞‡∞Ç ‡∞™‡±ç‡∞∞‡∞æ‡∞Ç‡∞§‡∞Ç",
                penukonda: "‡∞™‡±Ü‡∞®‡±Å‡∞ï‡±ä‡∞Ç‡∞° / ‡∞Ö‡∞®‡∞Ç‡∞§‡∞™‡±Å‡∞∞‡∞Ç",
                readMore: "‡∞µ‡∞ø‡∞ï‡±Ä‡∞™‡±Ä‡∞°‡∞ø‡∞Ø‡∞æ‡∞≤‡±ã ‡∞Æ‡∞∞‡∞ø‡∞Ç‡∞§ ‡∞ö‡∞¶‡∞µ‡∞Ç‡∞°‡∞ø",
                temple: "‡∞¶‡±á‡∞µ‡∞æ‡∞≤‡∞Ø‡∞Ç",
                location: "‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞Ç",
                cultural: "‡∞∏‡∞æ‡∞Ç‡∞∏‡±ç‡∞ï‡±É‡∞§‡∞ø‡∞ï ‡∞™‡±ç‡∞∞‡∞æ‡∞Æ‡±Å‡∞ñ‡±ç‡∞Ø‡∞§ & ‡∞®‡∞ï‡±ç‡∞∑‡∞§‡±ç‡∞∞‡∞Ç",
                features: "‡∞µ‡∞ø‡∞∂‡∞ø‡∞∑‡±ç‡∞ü ‡∞≤‡∞ï‡±ç‡∞∑‡∞£‡∞æ‡∞≤‡±Å",
                leaves: "‡∞Ü‡∞ï‡±Å‡∞≤‡±Å",
                flowers: "‡∞™‡±Å‡∞µ‡±ç‡∞µ‡±Å‡∞≤‡±Å",
                fruits: "‡∞™‡∞Ç‡∞°‡±ç‡∞≤‡±Å",
                overall: "‡∞ö‡±Ü‡∞ü‡±ç‡∞ü‡±Å/‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç",
                preloaded: "‡∞µ‡±Ü‡∞¨‡±ç ‡∞®‡±Å‡∞Ç‡∞°‡∞ø ‡∞≤‡±ã‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø",
                featureView: "‡∞´‡±Ä‡∞ö‡∞∞‡±ç ‡∞µ‡±Ä‡∞ï‡±ç‡∞∑‡∞£‡∞Ç",
                searchMore: "‡∞Æ‡∞∞‡∞ø‡∞Ç‡∞§ ‡∞∂‡±ã‡∞ß‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
                searchImage: "‡∞ö‡∞ø‡∞§‡±ç‡∞∞‡∞Ç ‡∞∂‡±ã‡∞ß‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
                viewDetails: "‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡∞®‡±Å ‡∞ö‡±Ç‡∞°‡∞Ç‡∞°‡∞ø ‚Üí",
                topPick: "‡∞Ö‡∞ó‡±ç‡∞∞ ‡∞é‡∞Ç‡∞™‡∞ø‡∞ï",
                star: "‡∞®‡∞ï‡±ç‡∞∑‡∞§‡±ç‡∞∞‡∞Ç",
                askAi: "‡∞ó‡±Å‡∞∞‡∞ø‡∞Ç‡∞ö‡∞ø ‡∞Ö‡∞°‡∞ó‡∞Ç‡∞°‡∞ø",
                consultingAi: "AI‡∞®‡∞ø ‡∞∏‡∞Ç‡∞™‡±ç‡∞∞‡∞¶‡∞ø‡∞∏‡±ç‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...",
                careCalendar: "üìÖ ‡∞∏‡∞Ç‡∞∞‡∞ï‡±ç‡∞∑‡∞£ ‡∞ï‡±ç‡∞Ø‡∞æ‡∞≤‡±Ü‡∞Ç‡∞°‡∞∞‡±ç",
                recipes: "üç≤ ‡∞µ‡∞Ç‡∞ü‡∞ï‡∞æ‡∞≤‡±Å",
                pestControl: "üêõ ‡∞§‡±Ü‡∞ó‡±Å‡∞≤‡±Å ‡∞®‡∞ø‡∞µ‡∞æ‡∞∞‡∞£",
                translateContent: "‚ú® ‡∞ï‡∞Ç‡∞ü‡±Ü‡∞Ç‡∞ü‡±ç‚Äå‡∞®‡∞ø ‡∞Ö‡∞®‡±Å‡∞µ‡∞¶‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
                translating: "‡∞Ö‡∞®‡±Å‡∞µ‡∞¶‡∞ø‡∞∏‡±ç‡∞§‡±ã‡∞Ç‡∞¶‡∞ø..."
            },
            "Korean": {
                title: "ÌÜ†Ï¢Ö ÎÜçÎ¶ºÏóÖ ÌÉêÏÉâÍ∏∞",
                subtitle: "Ïù∏ÎèÑ ÌÜ†Ï¢Ö Ï¢ÖÏùÑ ÏúÑÌïú ÎåÄÌôîÌòï Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§",
                searchPlaceholder: "ÏãùÎ¨º Í≤ÄÏÉâ...",
                uploadCsv: "CSV ÏóÖÎ°úÎìú",
                downloadCsv: "CSV Îã§Ïö¥Î°úÎìú",
                resetData: "Îç∞Ïù¥ÌÑ∞ Ïû¨ÏÑ§Ï†ï",
                category: "Î≤îÏ£º",
                nakshatra: "ÎÇôÏÉ§Ìä∏Îùº (Î≥Ñ)",
                birdStatus: "Ï°∞Î•ò ÏπúÌôî ÏÉÅÌÉú",
                highlights: "Ï£ºÏöî ÌäπÏßï Î∞è Ïù¥Ï†ê",
                plantingGuide: "Ïã¨Í∏∞ Í∞ÄÏù¥Îìú",
                maintenance: "Ïú†ÏßÄ Í¥ÄÎ¶¨",
                procurement: "Ï°∞Îã¨ Ï∂úÏ≤ò",
                kanchipuram: "Ïπ∏ÏπòÌë∏Îûå ÏßÄÏó≠",
                penukonda: "ÌéòÎàÑÏΩòÎã§ / ÏïÑÎÇúÌÉÄÌë∏Î•¥",
                readMore: "ÏúÑÌÇ§Î∞±Í≥ºÏóêÏÑú Îçî ÏùΩÍ∏∞",
                temple: "ÏÇ¨Ïõê",
                location: "ÏúÑÏπò",
                cultural: "Î¨∏ÌôîÏ†Å Ï§ëÏöîÏÑ± Î∞è ÎÇôÏÉ§Ìä∏Îùº",
                features: "Íµ¨Î≥ÑÎêòÎäî ÌäπÏßï",
                leaves: "Ïûé",
                flowers: "ÍΩÉ",
                fruits: "Ïó¥Îß§",
                overall: "ÎÇòÎ¨¥/Ï†ÑÏ≤¥",
                preloaded: "ÏõπÏóêÏÑú ÎØ∏Î¶¨ Î°úÎìúÎê®",
                featureView: "ÌäπÏßï Î≥¥Í∏∞",
                searchMore: "Îçî Í≤ÄÏÉâ",
                searchImage: "Ïù¥ÎØ∏ÏßÄ Í≤ÄÏÉâ",
                viewDetails: "ÏÉÅÏÑ∏ Î≥¥Í∏∞ ‚Üí",
                topPick: "ÏµúÍ≥†Ïùò ÏÑ†ÌÉù",
                star: "Î≥Ñ",
                askAi: "Ïóê ÎåÄÌï¥ ÏßàÎ¨∏ÌïòÍ∏∞",
                consultingAi: "AI ÏÉÅÎã¥ Ï§ë...",
                careCalendar: "üìÖ Í¥ÄÎ¶¨ Îã¨Î†•",
                recipes: "üç≤ Î†àÏãúÌîº",
                pestControl: "üêõ Ìï¥Ï∂© Î∞©Ï†ú",
                translateContent: "‚ú® ÏΩòÌÖêÏ∏† Î≤àÏó≠",
                translating: "Î≤àÏó≠ Ï§ë..."
            }
        };

        // --- Expanded Baseline Data (20+ Trees) with Nakshatra Fields ---
        const INITIAL_DATA = [
            // Fruit Trees
            {
                id: 1, Category: "Legacy Fruit Trees", "English Name": "Indian Gooseberry (Amla)", Tamil: "Nelli", Kannada: "Amalaki", Telugu: "Usirikai", Hindi: "Amla", Korean: "Indogwaja",
                "Specific Highlights/Benefits": "High Vitamin C, medicinal uses.", "Bird-Friendly Status": "SUPREME", "Nakshatra": "Bharani", "Temple Name (English)": "Nellai Iswara Temple", "Location (English)": "Tirunelveli"
            },
            {
                id: 2, Category: "Legacy Fruit Trees", "English Name": "Coconut", Tamil: "Thennai", Kannada: "Thengu", Telugu: "Kobbari", Hindi: "Nariyal", Korean: "Yeonagwaja",
                "Specific Highlights/Benefits": "Kalpavriksha - every part useful.", "Bird-Friendly Status": "High"
            },
            {
                id: 3, Category: "Legacy Fruit Trees", "English Name": "Jackfruit", Tamil: "Pala", Kannada: "Halasu", Telugu: "Panasa", Hindi: "Kathal", Korean: "Baramil",
                "Specific Highlights/Benefits": "Largest tree-borne fruit, timber value.", "Bird-Friendly Status": "High", "Nakshatra": "Uttradam", "Temple Name (English)": "Ekambareswara Temple", "Location (English)": "Kanchipuram"
            },
            {
                id: 4, Category: "Legacy Fruit Trees", "English Name": "Mango", Tamil: "Maa", Kannada: "Mavu", Telugu: "Mamidi", Hindi: "Aam", Korean: "Mango",
                "Specific Highlights/Benefits": "King of fruits, dense shade.", "Bird-Friendly Status": "SUPREME", "Nakshatra": "Purvabhadra", "Temple Name (English)": "Ranganatha Swami Temple", "Location (English)": "Ranganathapuram, Tiruvarur"
            },
            {
                id: 5, Category: "Legacy Fruit Trees", "English Name": "Tamarind", Tamil: "Puli", Kannada: "Hunase", Telugu: "Chinta", Hindi: "Imli", Korean: "Tamarindeu",
                "Specific Highlights/Benefits": "Long lived, culinary acidulant.", "Bird-Friendly Status": "High"
            },
            {
                id: 6, Category: "Legacy Fruit Trees", "English Name": "Jamun", Tamil: "Naval", Kannada: "Nerale", Telugu: "Neredu", Hindi: "Jamun", Korean: "Jamun",
                "Specific Highlights/Benefits": "Controls diabetes, timber resistant to water.", "Bird-Friendly Status": "SUPREME", "Nakshatra": "Rohini", "Temple Name (English)": "Jambu Keshwara Temple", "Location (English)": "Tiruvanaikaval, Tiruchirappalli"
            },
            {
                id: 7, Category: "Legacy Fruit Trees", "English Name": "Wood Apple", Tamil: "Vila", Kannada: "Belada", Telugu: "Velaga", Hindi: "Kaitha", Korean: "Na",
                "Specific Highlights/Benefits": "Sacred tree, digestive fruit.", "Bird-Friendly Status": "Moderate", "Nakshatra": "Vishakha", "Temple Name (English)": "Muthukumaraswami Temple", "Location (English)": "Panmozhi, Tirunelveli"
            },
            
            // Timber/Forest Trees
            {
                id: 8, Category: "Timber/Forest", "English Name": "Teak", Tamil: "Thekku", Kannada: "Seguni", Telugu: "Teku", Hindi: "Sagwan", Korean: "Tikeu",
                "Specific Highlights/Benefits": "King of timber, high commercial value.", "Bird-Friendly Status": "Low"
            },
            {
                id: 9, Category: "Timber/Forest", "English Name": "Red Sanders", Tamil: "Semmaram", Kannada: "Rakta Chandana", Telugu: "Erra Chandanam", Hindi: "Lal Chandan", Korean: "Na",
                "Specific Highlights/Benefits": "Endemic to Eastern Ghats, highly prized wood.", "Bird-Friendly Status": "Moderate"
            },
            {
                id: 10, Category: "Timber/Forest", "English Name": "Sandalwood", Tamil: "Chandanam", Kannada: "Srigandha", Telugu: "Gandham", Hindi: "Chandan", Korean: "Baekdan",
                "Specific Highlights/Benefits": "Fragrant heartwood, expensive oil.", "Bird-Friendly Status": "Moderate"
            },
            {
                id: 11, Category: "Timber/Forest", "English Name": "Neem", Tamil: "Vembu", Kannada: "Bevu", Telugu: "Vepa", Hindi: "Neem", Korean: "Nim",
                "Specific Highlights/Benefits": "Natural pesticide, air purifier, medicinal.", "Bird-Friendly Status": "High", "Nakshatra": "Uttarabhadra", "Temple Name (English)": "Sahasra Lakshmeeswarar Temple", "Location (English)": "Theeyattur, Pudukkottai"
            },
            {
                id: 12, Category: "Timber/Forest", "English Name": "Pongamia", Tamil: "Pungai", Kannada: "Honge", Telugu: "Kanuga", Hindi: "Karanj", Korean: "Na",
                "Specific Highlights/Benefits": "Bio-fuel source, nitrogen fixer.", "Bird-Friendly Status": "High"
            },
             {
                id: 13, Category: "Timber/Forest", "English Name": "Bamboo", Tamil: "Moongil", Kannada: "Bidiru", Telugu: "Veduru", Hindi: "Baans", Korean: "Daenamu",
                "Specific Highlights/Benefits": "Fast growing, multiple uses, soil binder.", "Bird-Friendly Status": "High", "Nakshatra": "Punarvasu", "Temple Name (English)": "Abhatshayeswara Temple", "Location (English)": "Irumbai, Viluppuram"
            },
            
            // Medicinal/Sacred
            {
                id: 14, Category: "Medicinal/Heritage", "English Name": "Mahua", Tamil: "Illupai", Kannada: "Ippa", Telugu: "Ippa", Hindi: "Mahua", Korean: "Na",
                "Specific Highlights/Benefits": "Flowers for alcohol/food, seeds for oil.", "Bird-Friendly Status": "SUPREME", "Nakshatra": "Revati", "Temple Name (English)": "Kailasha Natha Temple", "Location (English)": "Karukudi, Tiruvarur"
            },
            {
                id: 15, Category: "Medicinal/Heritage", "English Name": "Peepal", Tamil: "Arasu", Kannada: "Arali", Telugu: "Ravi", Hindi: "Peepal", Korean: "Bodikusu",
                "Specific Highlights/Benefits": "Sacred, releases oxygen at night.", "Bird-Friendly Status": "SUPREME", "Nakshatra": "Pushya", "Temple Name (English)": "Akshaya Pureeshwara Temple", "Location (English)": "Vilankulam, Tanjore"
            },
            {
                id: 16, Category: "Medicinal/Heritage", "English Name": "Banyan", Tamil: "Aalam", Kannada: "Aalada", Telugu: "Marri", Hindi: "Bargad", Korean: "Banyan",
                "Specific Highlights/Benefits": "National tree, supports vast ecosystem.", "Bird-Friendly Status": "SUPREME", "Nakshatra": "Magha", "Temple Name (English)": "Mahalingeshwara Temple", "Location (English)": "Tiruvarambur, Tiruchirappalli"
            },
             {
                id: 17, Category: "Medicinal/Heritage", "English Name": "Arjun", Tamil: "Marudham", Kannada: "Matti", Telugu: "Tella Maddi", Hindi: "Arjun", Korean: "Na",
                "Specific Highlights/Benefits": "Cardio-tonic bark, river bank stabilizer.", "Bird-Friendly Status": "High", "Nakshatra": "Swati", "Temple Name (English)": "Tantondreeswara Temple", "Location (English)": "Chittukadu, Chennai"
            },
             {
                id: 18, Category: "Medicinal/Heritage", "English Name": "Baheda", Tamil: "Thandrikai", Kannada: "Tare", Telugu: "Tanikaya", Hindi: "Baheda", Korean: "Na",
                "Specific Highlights/Benefits": "Part of Triphala, medicinal fruits.", "Bird-Friendly Status": "High"
            },
            {
                id: 19, Category: "Medicinal/Heritage", "English Name": "Curry Leaf", Tamil: "Karuveppilai", Kannada: "Karibevu", Telugu: "Karivepaku", Hindi: "Kadi Patta", Korean: "Keori",
                "Specific Highlights/Benefits": "Essential culinary spice, digestive.", "Bird-Friendly Status": "Moderate"
            },
             {
                id: 20, Category: "Medicinal/Heritage", "English Name": "Drumstick", Tamil: "Murungai", Kannada: "Nugge", Telugu: "Munaga", Hindi: "Sahjan", Korean: "Deureom-seutik",
                "Specific Highlights/Benefits": "Superfood, vitamin rich leaves and pods.", "Bird-Friendly Status": "Moderate"
            }
        ];

        // --- Icons ---
        const Icons = {
            Leaf: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.5 10-10 10Z"/><path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/></svg>,
            Flower: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 7.5a4.5 4.5 0 1 1 4.5 4.5M12 7.5A4.5 4.5 0 1 0 7.5 12M12 7.5V9m-4.5 3a4.5 4.5 0 1 1 4.5-4.5M7.5 12H9m3 4.5a4.5 4.5 0 1 1-4.5-4.5M12 16.5V15m4.5-3a4.5 4.5 0 1 1-4.5 4.5M16.5 12H15"/></svg>,
            Bird: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M16 7h.01"/><path d="M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20"/><path d="m20 7 2 .5-2 .5"/><path d="M10 18v3"/><path d="M14 17.75V21"/><path d="M7 18a6 6 0 0 0 3.84-10.61"/></svg>,
            MapPin: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>,
            Search: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>,
            Upload: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></svg>,
            Download: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>,
            X: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>,
            Droplet: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z"/></svg>,
            Sun: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>,
            Settings: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>,
            ExternalLink: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></svg>,
            Sparkles: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 3v4"/><path d="M3 5h4"/><path d="M3 9h4"/></svg>,
            Bot: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>,
            Send: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="22" x2="11" y1="2" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>,
            Refresh: () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 16h5v5"/></svg>,
            Save: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>,
            Star: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>,
            Globe: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" x2="22" y1="12" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>,
            Translate: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m5 8 6 6"/><path d="m4 14 6-6 2-3"/><path d="M2 5h12"/><path d="M7 2h1"/><path d="m22 22-5-10-5 10"/><path d="M14 18h6"/></svg>
        };

        // --- Helper Components ---
        const Badge = ({ children, color = "green" }) => {
            const colors = {
                green: "bg-green-100 text-green-800 border-green-200",
                blue: "bg-blue-100 text-blue-800 border-blue-200",
                yellow: "bg-yellow-100 text-yellow-800 border-yellow-200",
                red: "bg-red-100 text-red-800 border-red-200",
                purple: "bg-purple-100 text-purple-800 border-purple-200",
                orange: "bg-orange-100 text-orange-800 border-orange-200"
            };
            return (
                <span className={`px-2 py-0.5 rounded-full text-xs font-medium border ${colors[color] || colors.green}`}>
                    {children}
                </span>
            );
        };

        const DetailRow = ({ label, value, icon: Icon }) => (
            <div className="py-2 border-b border-gray-100 last:border-0">
                <div className="flex items-start">
                    {Icon && <div className="mt-1 mr-2 text-gray-500"><Icon /></div>}
                    <div>
                        <div className="text-xs font-semibold text-gray-500 uppercase tracking-wide">{label}</div>
                        <div className="text-gray-800 text-sm mt-0.5">{value || "N/A"}</div>
                    </div>
                </div>
            </div>
        );

        const callGemini = async (prompt, systemContext, userKey, jsonMode = false) => {
            if (!userKey) return null;

            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${userKey}`;
            
            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                systemInstruction: { parts: [{ text: systemContext }] },
                generationConfig: jsonMode ? { responseMimeType: "application/json" } : undefined
            };

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                if (!response.ok) throw new Error(`API Error: ${response.status}`);
                
                const data = await response.json();
                return data.candidates?.[0]?.content?.parts?.[0]?.text;
            } catch (error) {
                console.error("Gemini API Error:", error);
                return null;
            }
        };

        const fetchWikiImages = async (query) => {
            // Increased limit to 15 to find better candidates
            const url = `https://en.wikipedia.org/w/api.php?action=query&format=json&origin=*&generator=search&gsrnamespace=6&gsrlimit=15&gsrsearch=${encodeURIComponent(query)}&prop=imageinfo&iiprop=url`;
            try {
                const response = await fetch(url);
                const data = await response.json();
                if (!data.query || !data.query.pages) return [];
                return Object.values(data.query.pages)
                    .map(page => page.imageinfo?.[0]?.url)
                    .filter(url => url && (url.toLowerCase().endsWith('.jpg') || url.toLowerCase().endsWith('.jpeg') || url.toLowerCase().endsWith('.png')));
            } catch (e) {
                console.error("Wiki Image Fetch Error", e);
                return [];
            }
        };

        // --- Card Image Component ---
        const CardImage = ({ plantName }) => {
            const [imageUrl, setImageUrl] = useState(null);
            
            useEffect(() => {
                let isMounted = true;
                const getImages = async () => {
                    let images = await fetchWikiImages(`${plantName} tree`);
                    if (images.length === 0) images = await fetchWikiImages(plantName);
                    if (isMounted && images.length > 0) setImageUrl(images[0]);
                };
                if (plantName) getImages();
                return () => { isMounted = false; };
            }, [plantName]);

            if (imageUrl) return <img src={imageUrl} alt={plantName} className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105" />;
            return <div className="w-full h-full flex flex-col items-center justify-center bg-green-50 text-green-800"><span className="text-4xl mb-2">üå≥</span><span className="text-xs font-medium opacity-60">No Image</span></div>;
        };

        // --- Smart Gallery Component ---
        const SmartImageSlot = ({ type, plantName, color, uiLabels }) => {
            const [imageUrl, setImageUrl] = useState(null);
            const [loading, setLoading] = useState(false);
            const [images, setImages] = useState([]);
            const [currentIndex, setCurrentIndex] = useState(0);
            
            useEffect(() => {
                let isMounted = true;
                const getImages = async () => {
                    setLoading(true);
                    setImageUrl(null);
                    setImages([]);
                    // Use a broader search query if specific part not found
                    // Clean name: remove parens and use as base
                    const cleanName = plantName.replace(/\([^)]*\)/g, '').trim(); 
                    const parensMatch = plantName.match(/\(([^)]+)\)/);
                    const shortName = parensMatch ? parensMatch[1] : "";
                    
                    // Determine search suffix based on type
                    let searchSuffix = '';
                    if (type === uiLabels.overall) searchSuffix = 'Tree';
                    else if (type === uiLabels.leaves) searchSuffix = 'Leaves'; // Plural often better
                    else if (type === uiLabels.flowers) searchSuffix = 'Flowers';
                    else if (type === uiLabels.fruits) searchSuffix = 'Fruit';
                    
                    const queries = [];
                    // Priority 1: Short name + Suffix (e.g., "Amla Fruit")
                    if (shortName && searchSuffix) queries.push(`${shortName} ${searchSuffix}`);
                    // Priority 2: Clean English name + Suffix (e.g., "Indian Gooseberry Fruit")
                    if (searchSuffix) queries.push(`${cleanName} ${searchSuffix}`);
                    // Priority 3: Scientific name if available (not in current dataset, but good practice)
                    // Priority 4: Just Short Name
                    if (shortName) queries.push(shortName);
                    // Priority 5: Just Clean Name
                    queries.push(cleanName);

                    let foundImages = [];
                    for (const q of queries) {
                        if (foundImages.length > 0) break;
                        foundImages = await fetchWikiImages(q);
                    }
                    
                    // Fallback: If looking for specific part and failed, show general plant image
                    if (foundImages.length === 0 && searchSuffix) {
                         foundImages = await fetchWikiImages(`${cleanName} tree`);
                    }

                    if (isMounted) {
                        if (foundImages.length > 0) {
                            setImages(foundImages);
                            setImageUrl(foundImages[0]);
                        }
                        setLoading(false);
                    }
                };
                getImages();
                return () => { isMounted = false; };
            }, [plantName, type, uiLabels]);

            const nextImage = (e) => {
                e.stopPropagation();
                if (images.length === 0) return;
                const nextIdx = (currentIndex + 1) % images.length;
                setCurrentIndex(nextIdx);
                setImageUrl(images[nextIdx]);
            };

            const searchUrl = `https://www.google.com/search?tbm=isch&q=${encodeURIComponent(`${plantName} ${type}`)}`;

            return (
                <div className="flex flex-col h-full bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow relative group">
                    <div className={`h-32 ${color} flex items-center justify-center relative overflow-hidden bg-gray-100`}>
                        {loading ? <Icons.Refresh className="animate-spin text-gray-400" /> : imageUrl ? (
                            <><img src={imageUrl} alt={type} className="w-full h-full object-cover" />{images.length > 1 && <button onClick={nextImage} className="absolute right-1 bottom-1 bg-black/50 hover:bg-black/70 text-white p-1 rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity z-10"><Icons.Refresh size={12} /></button>}</>
                        ) : <div className="text-4xl opacity-50 flex flex-col items-center">{type === uiLabels.leaves ? 'üçÉ' : type === uiLabels.flowers ? 'üå∏' : type === uiLabels.fruits ? 'ü•≠' : 'üå≥'}</div>}
                    </div>
                    <div className="p-3 flex flex-col justify-between flex-grow">
                        <div><h4 className="font-semibold text-gray-700">{type}</h4><p className="text-xs text-gray-500 mt-1">{imageUrl ? uiLabels.preloaded : uiLabels.featureView}</p></div>
                        <a href={searchUrl} target="_blank" rel="noopener noreferrer" className="mt-3 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 py-1.5 px-3 rounded flex items-center justify-center gap-1 transition-colors"><Icons.Search size={14} /> {imageUrl ? uiLabels.searchMore : uiLabels.searchImage}</a>
                    </div>
                </div>
            );
        };

        const AIAssistant = ({ plant, userKey, uiLabels }) => {
            const [query, setQuery] = useState("");
            const [loading, setLoading] = useState(false);
            const [response, setResponse] = useState(null);

            const systemContext = useMemo(() => {
                return `You are an agro-forestry expert. Answer questions about: "${plant["English Name"]}" (Tamil: ${plant.Tamil}, Hindi: ${plant.Hindi}). Data: ${JSON.stringify(plant)}.`;
            }, [plant]);

            const handleAsk = async (customPrompt = null) => {
                const promptText = customPrompt || query;
                if (!promptText.trim()) return;
                setLoading(true);
                setResponse(null);
                if (customPrompt) setQuery(""); 
                const result = await callGemini(promptText, systemContext, userKey);
                setResponse(result || "Sorry, I couldn't get an answer. Check your API key.");
                setLoading(false);
            };

            const handleAction = (actionType) => {
                let prompt = "";
                switch(actionType) {
                    case "calendar": prompt = "Create a seasonal care calendar for this plant in India."; break;
                    case "recipe": prompt = "Suggest 3 traditional Indian recipes (culinary or home remedy) using parts of this plant."; break;
                    case "pest": prompt = "What are common pests or diseases for this tree in India, and what are organic/natural ways to treat them?"; break;
                }
                handleAsk(prompt);
            };

            return (
                <div className="bg-purple-50 rounded-xl p-5 border border-purple-100 shadow-sm mt-6">
                    <div className="flex items-center gap-2 mb-4 border-b border-purple-200 pb-2">
                        <div className="bg-purple-100 p-2 rounded-full text-purple-600"><Icons.Sparkles /></div>
                        <h3 className="font-bold text-purple-900">AI Smart Companion</h3>
                    </div>
                    <div className="space-y-4">
                        <div className="flex flex-wrap gap-2">
                             <button onClick={() => handleAction("calendar")} disabled={loading} className="flex items-center gap-1.5 px-3 py-2 bg-white text-purple-700 border border-purple-200 rounded-lg text-xs font-medium hover:bg-purple-100 hover:border-purple-300 transition-all shadow-sm">{uiLabels.careCalendar}</button>
                            <button onClick={() => handleAction("recipe")} disabled={loading} className="flex items-center gap-1.5 px-3 py-2 bg-white text-purple-700 border border-purple-200 rounded-lg text-xs font-medium hover:bg-purple-100 hover:border-purple-300 transition-all shadow-sm">{uiLabels.recipes}</button>
                            <button onClick={() => handleAction("pest")} disabled={loading} className="flex items-center gap-1.5 px-3 py-2 bg-white text-purple-700 border border-purple-200 rounded-lg text-xs font-medium hover:bg-purple-100 hover:border-purple-300 transition-all shadow-sm">{uiLabels.pestControl}</button>
                        </div>
                        <div className="relative">
                            <input type="text" value={query} onChange={(e) => setQuery(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && handleAsk()} placeholder={userKey ? `${uiLabels.askAi} ${plant["English Name"]}...` : "Enter API Key in settings first"} disabled={!userKey} className="w-full pl-4 pr-10 py-3 rounded-lg border border-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-400 bg-white text-sm disabled:bg-gray-100 disabled:text-gray-400" />
                            <button onClick={() => handleAsk()} disabled={loading || !query.trim() || !userKey} className="absolute right-2 top-2 p-1.5 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 transition-colors"><Icons.Send size={16} /></button>
                        </div>
                        {loading && <div className="flex items-center justify-center py-8 text-purple-600"><Icons.Sparkles className="animate-spin-custom mr-2" /><span className="text-sm font-medium">{uiLabels.consultingAi}</span></div>}
                        {!loading && response && <div className="bg-white rounded-lg p-4 border border-purple-100 text-sm text-gray-800 shadow-inner max-h-64 overflow-y-auto"><div className="markdown-body whitespace-pre-wrap leading-relaxed">{response}</div></div>}
                    </div>
                </div>
            );
        };

        const SettingsModal = ({ onClose, onSave, currentKey, googleTranslate, toggleGoogleTranslate }) => {
            const [key, setKey] = useState(currentKey || "");
            return (
                <div className="fixed inset-0 bg-black/50 z-[60] flex items-center justify-center p-4" onClick={onClose}>
                    <div className="bg-white rounded-xl p-6 w-full max-w-md shadow-2xl" onClick={e => e.stopPropagation()}>
                        <h3 className="text-xl font-bold mb-4 flex items-center gap-2"><Icons.Settings /> App Settings</h3>
                        <div className="mb-4">
                            <label className="block text-sm font-medium text-gray-700 mb-1">Gemini API Key</label>
                            <input type="password" value={key} onChange={(e) => setKey(e.target.value)} className="w-full p-2 border rounded focus:ring-2 focus:ring-green-500" placeholder="Paste your API key here..." />
                            <p className="text-xs text-gray-500 mt-2">Required for AI features & Translation. Get a free key from <a href="https://aistudio.google.com/app/apikey" target="_blank" className="text-blue-600 underline">Google AI Studio</a>.</p>
                        </div>
                        <div className="mb-6 pt-4 border-t">
                            <label className="flex items-center justify-between cursor-pointer">
                                <span className="text-sm font-medium text-gray-700">Enable Google Translate Widget</span>
                                <input type="checkbox" checked={googleTranslate} onChange={toggleGoogleTranslate} className="w-4 h-4 text-green-600" />
                            </label>
                            <p className="text-xs text-gray-500 mt-1">Shows a Google Translate dropdown at top of page.</p>
                        </div>
                        <div className="flex justify-end gap-2">
                            <button onClick={onClose} className="px-4 py-2 text-gray-600 hover:bg-gray-100 rounded">Cancel</button>
                            <button onClick={() => { onSave(key); onClose(); }} className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">Save Key</button>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [plants, setPlants] = useState(() => {
                const saved = localStorage.getItem("native_plants_data");
                return saved ? JSON.parse(saved) : INITIAL_DATA;
            });
            const [selectedPlant, setSelectedPlant] = useState(null);
            const [searchTerm, setSearchTerm] = useState("");
            const [filters, setFilters] = useState({ category: "All", location: "All" });
            const [isDragging, setIsDragging] = useState(false);
            const [userApiKey, setUserApiKey] = useState(localStorage.getItem("gemini_api_key") || "");
            const [showSettings, setShowSettings] = useState(false);
            const [currentLanguage, setCurrentLanguage] = useState("English");
            const [googleTranslateEnabled, setGoogleTranslateEnabled] = useState(localStorage.getItem("enable_google_translate") === "true");
            // Cache for translated content to avoid re-fetching
            const [translatedContent, setTranslatedContent] = useState({}); 
            const [isTranslating, setIsTranslating] = useState(false);

            useEffect(() => { localStorage.setItem("native_plants_data", JSON.stringify(plants)); }, [plants]);

            // Toggle Google Translate Widget
            useEffect(() => {
                if (googleTranslateEnabled) {
                    if (!document.getElementById("google_translate_script")) {
                        const script = document.createElement("script");
                        script.id = "google_translate_script";
                        script.src = "//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit";
                        document.body.appendChild(script);
                        window.googleTranslateElementInit = function() {
                            new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
                        };
                    }
                }
            }, [googleTranslateEnabled]);

            const handleSaveKey = (key) => { setUserApiKey(key); localStorage.setItem("gemini_api_key", key); };
            const toggleGoogleTranslate = () => {
                const newState = !googleTranslateEnabled;
                setGoogleTranslateEnabled(newState);
                localStorage.setItem("enable_google_translate", newState);
                if (!newState) alert("Please refresh the page to fully remove the widget.");
            };

            // AI Content Translation Logic
            const translateCurrentPlant = async () => {
                if (!userApiKey) { alert("Please add your Gemini API Key in Settings to use AI Translation."); return; }
                if (!selectedPlant) return;
                
                setIsTranslating(true);
                const plantId = selectedPlant.id;
                const lang = currentLanguage;
                
                const prompt = `Translate the following JSON object values into ${lang}. Keep the keys exactly the same. Return ONLY valid JSON.
                {
                    "highlights": "${selectedPlant["Specific Highlights/Benefits"]}",
                    "planting": "${selectedPlant["Planting Instructions"]}",
                    "maintenance": "${selectedPlant["Maintenance Instructions"]}",
                    "procurement_kanchi": "${selectedPlant["Procurement Kanchipuram"]}",
                    "procurement_penu": "${selectedPlant["Procurement Penukonda/Bangalore"]}"
                }`;

                const resultStr = await callGemini(prompt, "You are a translator.", userApiKey, true);
                
                if (resultStr) {
                    try {
                        const result = JSON.parse(resultStr);
                        setTranslatedContent(prev => ({
                            ...prev,
                            [`${plantId}_${lang}`]: result
                        }));
                    } catch (e) {
                        console.error("Translation parse error", e);
                        alert("Error parsing translation. Please try again.");
                    }
                } else {
                    alert("Translation failed. Please check your API key.");
                }
                setIsTranslating(false);
            };

            const categories = useMemo(() => ["All", ...new Set(plants.map(p => p.Category).filter(Boolean))], [plants]);
            const filteredPlants = useMemo(() => {
                return plants.filter(plant => {
                    const matchesSearch = (plant["English Name"] || "").toLowerCase().includes(searchTerm.toLowerCase()) || (plant.Tamil || "").includes(searchTerm) || (plant.Hindi || "").includes(searchTerm);
                    const matchesCategory = filters.category === "All" || plant.Category === filters.category;
                    const matchesLocation = filters.location === "All" ? true : filters.location === "Kanchipuram" ? (plant.Kanchipuram?.toLowerCase().includes("yes")) : (plant.Anantapur?.toLowerCase().includes("yes"));
                    return matchesSearch && matchesCategory && matchesLocation;
                });
            }, [plants, searchTerm, filters]);

            const handleFileUpload = (file) => {
                Papa.parse(file, {
                    header: true, skipEmptyLines: true,
                    complete: (results) => {
                        const parsedPlants = results.data.map((row, idx) => ({ id: idx + 1000, ...row })).filter(row => row["English Name"]);
                        if (parsedPlants.length > 0) { setPlants(parsedPlants); alert(`Successfully loaded ${parsedPlants.length} plants!`); } else { alert("No valid data found."); }
                    },
                    error: (err) => alert("Error: " + err.message)
                });
            };

            const handleDownloadCSV = () => {
                const csv = Papa.unparse(plants.map(({id, ...rest}) => rest));
                const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement("a");
                const url = URL.createObjectURL(blob);
                link.setAttribute("href", url);
                link.setAttribute("download", "native_plants_data.csv");
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            };

            const handleResetData = () => { if (confirm("Reset to default?")) { setPlants(INITIAL_DATA); localStorage.removeItem("native_plants_data"); } };
            const onDrop = (e) => { e.preventDefault(); setIsDragging(false); const file = e.dataTransfer.files[0]; if (file) handleFileUpload(file); };

            const languages = [ { code: "English", label: "English", key: "English Name" }, { code: "Tamil", label: "‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç", key: "Tamil" }, { code: "Kannada", label: "‡≤ï‡≤®‡≥ç‡≤®‡≤°", key: "Kannada" }, { code: "Telugu", label: "‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å", key: "Telugu" }, { code: "Korean", label: "ÌïúÍµ≠Ïñ¥", key: "Korean" } ];
            
            const getDisplayName = (plant) => {
                const langKey = languages.find(l => l.code === currentLanguage)?.key || "English Name";
                return plant[langKey] || plant["English Name"];
            };
            const getFontClass = () => {
                switch(currentLanguage) { case "Tamil": return "font-tamil"; case "Kannada": return "font-kannada"; case "Telugu": return "font-telugu"; case "Korean": return "font-korean"; default: return ""; }
            };
            
            const uiLabels = TRANSLATIONS[currentLanguage];
            
            // Get text content (translated or original)
            const getPlantContent = (field) => {
                if (currentLanguage === "English") return selectedPlant[field];
                const cacheKey = `${selectedPlant.id}_${currentLanguage}`;
                const mapping = {
                    "Specific Highlights/Benefits": "highlights",
                    "Planting Instructions": "planting",
                    "Maintenance Instructions": "maintenance",
                    "Procurement Kanchipuram": "procurement_kanchi",
                    "Procurement Penukonda/Bangalore": "procurement_penu"
                };
                if (translatedContent[cacheKey] && translatedContent[cacheKey][mapping[field]]) {
                    return translatedContent[cacheKey][mapping[field]];
                }
                return selectedPlant[field]; // Fallback to English
            };

            return (
                <div className={`min-h-screen pb-10 ${getFontClass()}`} onDragOver={(e) => { e.preventDefault(); setIsDragging(true); }} onDragLeave={() => setIsDragging(false)} onDrop={onDrop}>
                    <header className="bg-green-800 text-white shadow-lg sticky top-0 z-30">
                        {googleTranslateEnabled && <div id="google_translate_element" className="absolute top-0 right-0 m-2 z-50"></div>}
                        <div className="container mx-auto px-4 py-4">
                            <div className="flex flex-col md:flex-row justify-between items-center gap-4">
                                <div><h1 className="text-2xl font-bold flex items-center gap-2">üå± {uiLabels.title}</h1><p className="text-green-200 text-sm">{uiLabels.subtitle}</p></div>
                                <div className="flex gap-2 w-full md:w-auto items-center">
                                    <div className="relative flex-grow md:flex-grow-0">
                                        <input type="text" placeholder={uiLabels.searchPlaceholder} className="w-full md:w-64 pl-10 pr-4 py-2 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-green-400" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} />
                                        <div className="absolute left-3 top-2.5 text-gray-400"><Icons.Search /></div>
                                    </div>
                                    <div className="flex items-center bg-green-700 rounded-lg p-1">
                                        <Icons.Globe className="ml-2 text-green-200" />
                                        <select value={currentLanguage} onChange={(e) => setCurrentLanguage(e.target.value)} className="bg-transparent text-white border-none text-sm focus:ring-0 cursor-pointer py-1 px-2">
                                            {languages.map(lang => <option key={lang.code} value={lang.code} className="text-gray-800">{lang.label}</option>)}
                                        </select>
                                    </div>
                                    <label className="cursor-pointer bg-green-700 hover:bg-green-600 p-2 rounded-lg text-white transition-colors" title={uiLabels.uploadCsv}><Icons.Upload /><input type="file" accept=".csv" className="hidden" onChange={(e) => handleFileUpload(e.target.files[0])} /></label>
                                    <button onClick={handleDownloadCSV} className="bg-green-700 hover:bg-green-600 p-2 rounded-lg text-white transition-colors" title={uiLabels.downloadCsv}><Icons.Download /></button>
                                    <button onClick={handleResetData} className="bg-red-700 hover:bg-red-600 p-2 rounded-lg text-white transition-colors" title={uiLabels.resetData}><Icons.Refresh /></button>
                                    <button onClick={() => setShowSettings(true)} className={`p-2 rounded-lg transition-colors ${userApiKey ? 'bg-green-700 text-white' : 'bg-yellow-500 text-white animate-pulse'}`} title="Settings / API Key"><Icons.Settings /></button>
                                </div>
                            </div>
                            <div className="mt-4 flex flex-wrap gap-2 text-sm">
                                <select className="bg-green-700 text-white border-none rounded px-3 py-1.5 focus:ring-1 focus:ring-white" value={filters.category} onChange={(e) => setFilters(prev => ({...prev, category: e.target.value}))}><option value="All">All Categories</option>{categories.filter(c => c !== "All").map(c => <option key={c} value={c}>{c}</option>)}</select>
                                <select className="bg-green-700 text-white border-none rounded px-3 py-1.5 focus:ring-1 focus:ring-white" value={filters.location} onChange={(e) => setFilters(prev => ({...prev, location: e.target.value}))}><option value="All">All Locations</option><option value="Kanchipuram">{uiLabels.kanchipuram}</option><option value="Anantapur">{uiLabels.penukonda}</option></select>
                                <div className="ml-auto text-xs text-green-200 opacity-75 self-center hidden md:block">Tip: Drag & Drop CSV to update data. Your data is saved automatically.</div>
                            </div>
                        </div>
                    </header>

                    {isDragging && <div className="fixed inset-0 bg-green-900 bg-opacity-90 z-50 flex items-center justify-center text-white"><div className="text-center p-10 border-4 border-dashed border-green-400 rounded-3xl"><Icons.Upload size={64} className="mx-auto mb-4" /><h2 className="text-3xl font-bold">Drop CSV File Here</h2><p className="mt-2">to update the plant database</p></div></div>}

                    <main className="container mx-auto px-4 py-8">
                        {filteredPlants.length === 0 ? <div className="text-center py-20 text-gray-500"><p className="text-xl">No plants found.</p><button onClick={() => {setSearchTerm(""); setFilters({category: "All", location: "All"})}} className="mt-4 text-green-600 underline">Clear Filters</button></div> : 
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            {filteredPlants.map((plant) => (
                                <div key={plant.id} onClick={() => setSelectedPlant(plant)} className="bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 cursor-pointer border border-gray-100 group overflow-hidden animate-fade-in flex flex-col h-full">
                                    <div className="h-48 overflow-hidden bg-gray-100 relative">
                                        <CardImage plantName={plant["English Name"]} />
                                        <div className="absolute top-2 right-2 flex gap-1">
                                            {plant["Bird-Friendly Status"]?.includes("SUPREME") && <span className="bg-yellow-400 text-yellow-900 text-xs font-bold px-2 py-1 rounded-full shadow-sm flex items-center gap-1"><Icons.Bird size={12} /> {uiLabels.topPick}</span>}
                                            {plant["Nakshatra"] && <span className="bg-orange-400 text-orange-900 text-xs font-bold px-2 py-1 rounded-full shadow-sm flex items-center gap-1"><Icons.Star size={12} /> {uiLabels.star}</span>}
                                        </div>
                                        <div className="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4 pt-10">
                                            <h3 className={`text-white font-bold text-lg truncate ${getFontClass()}`}>{getDisplayName(plant)}</h3>
                                            <p className="text-white/80 text-sm truncate">{currentLanguage === "English" ? (plant.Tamil || plant.Hindi) : plant["English Name"]}</p>
                                        </div>
                                    </div>
                                    <div className="p-4 flex flex-col flex-grow">
                                        <div className="mb-3 flex flex-wrap gap-1"><Badge color="blue">{plant.Category}</Badge>{plant.Kanchipuram?.toLowerCase().includes('yes') && <Badge color="green">Kanchipuram</Badge>}{plant.Anantapur?.toLowerCase().includes('yes') && <Badge color="yellow">Penukonda</Badge>}</div>
                                        <p className="text-sm text-gray-600 line-clamp-2 mb-4">{plant["Specific Highlights/Benefits"]}</p>
                                        <div className="mt-auto flex items-center justify-between text-xs text-gray-500 border-t pt-3"><span className="flex items-center gap-1"><Icons.Bird size={14}/> {plant["Bird-Friendly Status"]?.split('(')[0]}</span><span className="text-green-600 font-medium group-hover:translate-x-1 transition-transform">{uiLabels.viewDetails}</span></div>
                                    </div>
                                </div>
                            ))}
                        </div>}
                    </main>

                    {selectedPlant && <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm" onClick={() => setSelectedPlant(null)}>
                        <div className="bg-white rounded-2xl w-full max-w-5xl h-[90vh] overflow-hidden flex flex-col shadow-2xl animate-fade-in" onClick={e => e.stopPropagation()}>
                            <div className="bg-green-50 border-b px-6 py-4 flex justify-between items-start">
                                <div>
                                    <h2 className={`text-2xl font-bold text-gray-800 ${getFontClass()}`}>{getDisplayName(selectedPlant)}</h2>
                                    <p className="text-gray-600 font-medium italic serif text-sm mt-1">
                                        {currentLanguage !== "English" && `${selectedPlant["English Name"]} ‚Ä¢ `}
                                        {currentLanguage !== "Tamil" && `${selectedPlant.Tamil} ‚Ä¢ `}
                                        {currentLanguage !== "Hindi" && `${selectedPlant.Hindi} ‚Ä¢ `}
                                        {currentLanguage !== "Kannada" && `${selectedPlant.Kannada} ‚Ä¢ `}
                                        {currentLanguage !== "Telugu" && `${selectedPlant.Telugu}`}
                                        {currentLanguage !== "Korean" && selectedPlant.Korean && selectedPlant.Korean !== "NA" && ` ‚Ä¢ ${selectedPlant.Korean}`}
                                    </p>
                                </div>
                                <button onClick={() => setSelectedPlant(null)} className="p-2 hover:bg-gray-200 rounded-full transition-colors"><Icons.X /></button>
                            </div>
                            <div className="flex-grow overflow-y-auto p-6">
                                <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                                    <div className="lg:col-span-1 space-y-6">
                                        <div className="bg-gray-50 rounded-lg p-1 border h-64 overflow-hidden relative">
                                            <SmartImageSlot type={uiLabels.overall} plantName={selectedPlant["English Name"]} color="bg-green-100" uiLabels={uiLabels} />
                                        </div>
                                        <div><h3 className="font-bold text-gray-800 mb-3 flex items-center gap-2"><span className="w-1 h-5 bg-green-500 rounded-full"></span> {uiLabels.features}</h3>
                                            <div className="grid grid-cols-2 gap-3 h-64">
                                                <SmartImageSlot type={uiLabels.leaves} plantName={selectedPlant["English Name"]} color="bg-green-50" uiLabels={uiLabels} />
                                                <SmartImageSlot type={uiLabels.flowers} plantName={selectedPlant["English Name"]} color="bg-pink-50" uiLabels={uiLabels} />
                                                <SmartImageSlot type={uiLabels.fruits} plantName={selectedPlant["English Name"]} color="bg-orange-50" uiLabels={uiLabels} />
                                                <SmartImageSlot type={uiLabels.overall} plantName={selectedPlant["English Name"]} color="bg-amber-50" uiLabels={uiLabels} />
                                            </div>
                                        </div>
                                        <div className="bg-green-50 rounded-xl p-4 space-y-2"><DetailRow label={uiLabels.category} value={selectedPlant.Category} /><DetailRow label={uiLabels.birdStatus} value={selectedPlant["Bird-Friendly Status"]} icon={Icons.Bird} /></div>
                                    </div>
                                    <div className="lg:col-span-2 space-y-8">
                                        {/* NAKSHATRA SECTION */}
                                        {selectedPlant["Nakshatra"] && selectedPlant["Nakshatra"] !== "" && (
                                            <section className="bg-orange-50 border border-orange-200 rounded-xl p-5 shadow-sm">
                                                <h3 className="text-xl font-bold text-orange-900 mb-3 flex items-center gap-2"><Icons.Star className="text-orange-600" /> {uiLabels.cultural}</h3>
                                                <div className="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                                                    <div className="bg-white p-3 rounded-lg border border-orange-100"><span className="block text-xs text-orange-500 uppercase font-bold">{uiLabels.nakshatra}</span><span className="text-orange-900 font-semibold text-lg">{selectedPlant["Nakshatra"]}</span></div>
                                                    <div className="bg-white p-3 rounded-lg border border-orange-100"><span className="block text-xs text-orange-500 uppercase font-bold">{uiLabels.temple}</span><span className="text-gray-800 font-medium">{selectedPlant["Temple Name (English)"] || "N/A"}</span></div>
                                                    <div className="bg-white p-3 rounded-lg border border-orange-100"><span className="block text-xs text-orange-500 uppercase font-bold">{uiLabels.location}</span><span className="text-gray-800 font-medium">{selectedPlant["Location (English)"] || "N/A"}</span></div>
                                                </div>
                                            </section>
                                        )}

                                        {/* CONTENT TRANSLATION BUTTON */}
                                        {currentLanguage !== "English" && (
                                            <div className="flex justify-end mb-2">
                                                <button 
                                                    onClick={translateCurrentPlant} 
                                                    disabled={isTranslating}
                                                    className={`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${isTranslating ? 'bg-gray-100 text-gray-400' : 'bg-purple-100 text-purple-700 hover:bg-purple-200'}`}
                                                >
                                                    {isTranslating ? <><Icons.Refresh className="animate-spin" size={16}/> {uiLabels.translating}</> : <><Icons.Translate size={16}/> {uiLabels.translateContent} {currentLanguage}</>}
                                                </button>
                                            </div>
                                        )}

                                        <section><h3 className="text-xl font-bold text-gray-800 mb-3 border-b pb-2">{uiLabels.highlights}</h3><p className="text-gray-700 leading-relaxed text-lg">{getPlantContent("Specific Highlights/Benefits")}</p></section>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            <div className="bg-blue-50 rounded-xl p-5 border border-blue-100"><h4 className="font-bold text-blue-900 flex items-center gap-2 mb-3"><Icons.Sun size={18} /> {uiLabels.plantingGuide}</h4><p className="text-blue-800 text-sm leading-relaxed whitespace-pre-line">{getPlantContent("Planting Instructions") || "No specific instructions available."}</p></div>
                                            <div className="bg-amber-50 rounded-xl p-5 border border-amber-100"><h4 className="font-bold text-amber-900 flex items-center gap-2 mb-3"><Icons.Droplet size={18} /> {uiLabels.maintenance}</h4><p className="text-amber-800 text-sm leading-relaxed whitespace-pre-line">{getPlantContent("Maintenance Instructions") || "Standard maintenance required."}</p></div>
                                        </div>
                                        <AIAssistant plant={selectedPlant} userKey={userApiKey} uiLabels={uiLabels} />
                                        <section className="bg-gray-50 rounded-xl p-5 border border-gray-200"><h3 className="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2"><Icons.MapPin size={20} className="text-red-500" /> {uiLabels.procurement}</h3><div className="grid grid-cols-1 md:grid-cols-2 gap-6"><div><h5 className="font-semibold text-gray-700 mb-2 border-b border-gray-200 pb-1">{uiLabels.kanchipuram}</h5><p className="text-sm text-gray-600 whitespace-pre-wrap">{getPlantContent("Procurement Kanchipuram") || "Contact local nurseries."}</p></div><div><h5 className="font-semibold text-gray-700 mb-2 border-b border-gray-200 pb-1">{uiLabels.penukonda}</h5><p className="text-sm text-gray-600 whitespace-pre-wrap">{getPlantContent("Procurement Penukonda/Bangalore") || "Contact Horticulture Dept."}</p></div></div></section>
                                        <div className="flex justify-end pt-4"><a href={`https://en.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(selectedPlant["English Name"])}`} target="_blank" className="inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 font-medium">{uiLabels.readMore} <Icons.ExternalLink size={16} /></a></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>}
                    
                    {showSettings && <SettingsModal currentKey={userApiKey} googleTranslate={googleTranslateEnabled} toggleGoogleTranslate={toggleGoogleTranslate} onClose={() => setShowSettings(false)} onSave={handleSaveKey} />}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>